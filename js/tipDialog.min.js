/**
 * Created with JetBrains WebStorm.
 * User: EX-LUOYONG002 （Rodey -- www.senuu.com）
 * Date: 14-3-6
 * Time: 下午2:52
 * To change this template use File | Settings | File Templates.
 */

/**
 * 弹窗提示插件
 * @param type      类型:  success (成功) || warning (警告) || info (消息) || danger (异常错误)
 * @param options   可选:  预留选项
 * @return { Object }
 *
 * Use:
 *
 * tipDialog({
                msg:'【公众号推荐】"理财宝宝大比拼"，新理财资讯一网打尽',  //内容
                title: '提示',                                        //标题
                type: 'success',                                     //状态
                autoClose: true,                                     //是否自动关闭
                closeTime: 3000,                                     //设置自动关闭时间
                btnOk: {                                             //确认按钮
                    val: '确认',                                     // 按钮文字
                    call: function(evt){                             // 确认按钮回调函数
                        console.log(evt)
                    },
                    close: false                                     // 触发后是否关闭弹窗（ true: 关闭， false: 保留）
                },
                btnCancel:{
                    val: '关闭',
                    call: function(evt){
                        console.log(evt)
                    },
                    close: true
                }
            });
 *
 *
 */

define(["jQuery","text!tpl/public/tipDialog.html"],function(c,b){var a=function(h){var v=this;var d={"success":'<svg><g id="icon-checkmark-circle" fill="#79C46C"><path d="M24 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zM19.5 39l-9.938-12.938 4.406-4.594 5.531 7.031 17.344-14.156 2.156 2.156-19.5 22.5z"></path></g></svg>',"error":'<svg><g id="icon-cancel-circle" fill="#FF645C"><path d="M24 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zM36 16.243l-7.757 7.757 7.757 7.757v4.243h-4.243l-7.757-7.757-7.757 7.757h-4.243v-4.243l7.757-7.757-7.757-7.757v-4.243h4.243l7.757 7.757 7.757-7.757h4.243v4.243z"></path></g></svg>',"warning":'<svg><g id="icon-question" fill="#EAB36E"><path d="M21 33h6v6h-6zM33 12c1.657 0 3 1.343 3 3v9l-9 6h-6v-3l9-6v-3h-15v-6h18zM24 4.5c-5.209 0-10.105 2.028-13.789 5.711s-5.711 8.58-5.711 13.789c0 5.209 2.028 10.106 5.711 13.789s8.58 5.711 13.789 5.711c5.209 0 10.106-2.028 13.789-5.711s5.711-8.58 5.711-13.789c0-5.209-2.028-10.105-5.711-13.789s-8.58-5.711-13.789-5.711zM24 0v0c13.255 0 24 10.745 24 24s-10.745 24-24 24c-13.255 0-24-10.745-24-24s10.745-24 24-24z"></path></g></svg>',"info":'<svg><g id="icon-info" fill="#62D1CD"><path d="M24 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zM21 9h6v6h-6v-6zM30 39h-12v-3h3v-12h-3v-3h9v15h3v3z"></path></g></svg>'};var q=h||{};var l={type:q.type||"",title:q.title||"",msg:q.msg||"",btnOk:{val:q.btnOk&&q.btnOk.val||"\u786e\u8ba4",call:q.btnOk&&q.btnOk.call||e,close:(q.btnOk&&q.btnOk.close!=undefined)?q.btnOk.close:true},btnCancel:{val:q.btnCancel&&q.btnCancel.val||"\u5173\u95ed",call:q.btnCancel&&q.btnCancel.call||e,close:(q.btnCancel&&q.btnCancel.close!=undefined)?q.btnCancel.close:true},lock:q.lock||true,time:q.time||"fast",autoClose:q.autoClose||false,closeTime:q.closeTime||3000,autoComplate:q.autoComplate||function(){}};var r=function(G,H){var D=this,E=[];for(var F=2;F<arguments.length;F++){E.push(arguments[F])}return function(I){I.preventDefault();I.stopPropagation();E.push(I);e(G.close);H.apply(y,E)}};var t=[];var y=c("#tipDialog")[0]?c("#tipDialog"):c(b);var k=y.find(".close");var A=y.find(".tipType");var g=y.find(".tipTitle");var x=y.find(".tipContent");var n=y.find(".tipBtns");var i=y.find(".btnOk");var s=y.find(".btnCancel");var o=document.getElementById("tipDialogMasker00")?document.getElementById("tipDialogMasker00"):document.createElement("div");o.setAttribute("id","tipDialogMasker00");o.setAttribute("class","tipDialogMasker");document.body.appendChild(o);c(o).stop().fadeIn(l.time);var C=c("body").width();var j=document.documentElement.clientHeight;x.html(q.msg||"");o.appendChild(y[0]);y.css({left:(C-y.outerWidth())/2,top:(j-y.outerHeight())/2-50});y.stop().fadeIn(l.time);if(l.type&&l.type!=""){A.html(d[l.type]).css("display","block")}else{A.html().hide()}if(l.title&&l.title!=""){g.text(l.title).show()}else{g.text("").hide()}if(l.autoClose){setTimeout(function(){f(l.autoComplate)},l.closeTime)}var z=q.btnOk&&q.btnOk!={};var w=q.btnCancel&&q.btnCancel!={};if(z&&w){i.removeClass("btmRadius").addClass("btmRRadius").css({"borderLeft":"solid 1px #CCC","width":"50%"}).text(l.btnOk.val);i.bind("touchend",r(l.btnOk,l.btnOk.call));s.removeClass("btmRadius").addClass("btmLRadius").css({"width":"50%"}).text(l.btnCancel.val);s.bind("touchend",r(l.btnCancel,l.btnCancel.call))}else{if(z&&!w){i.removeClass("btmRRadius").addClass("btmRadius").css({"borderLeft":"none","width":"100%"}).text(l.btnOk.val);i.bind("touchend",r(l.btnOk,l.btnOk.call));s.css({"display":"none"})}else{if(!z&&w){s.removeClass("btmLRadius").addClass("btmRadius").css({"borderLeft":"none","width":"100%"}).text(l.btnCancel.val);s.bind("touchend",r(l.btnCancel,l.btnCancel.call));i.css({"display":"none"})}else{if(!z&&!w){n.hide()}}}}i.bind("touchstart",this.endEvent);k.bind("click",function(){y.hide()});var B=p;var m=f;function p(D){c(o).stop().fadeIn(l.time,D)}function f(D){c(o).stop().fadeOut(l.time,D)}var e=function(D,E){if(D){c(o).stop().fadeOut(l.time);return false}};var u=function(D){D.preventDefault();D.stopPropagation()};return this};window.tipDialog=a;if(window.SYST){SYST.tipDialog=a}return a});
